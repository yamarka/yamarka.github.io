<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Últimas Noticias</title>
    <style>
        /* Estilos generales */
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        /* Estilos del cuerpo */
        .cuerpo {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }

        .titulo {
            font-family: Notable, sans-serif;
        }

        /* Estilos de las noticias */
        .noticia {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 20px;
            transition: transform 0.2s ease;
            cursor: pointer;
        }

        .noticia:hover {
            transform: scale(1.05);
        }

        .imagen {
            width: 100%;
            height: 200px;
            object-fit: cover;
            margin-bottom: 10px;
        }

        .contenido {
            max-height: 90px;
            overflow: hidden;
        }

        /* Estilos del botón "Leer más" */
        .leer-mas {
            display: block;
            text-align: center;
            margin-top: 10px;
            background-color: #007BFF;
            color: #fff;
            padding: 8px 16px;
            border-radius: 5px;
            text-decoration: none;
        }

        .leer-mas:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div id="header"></div>

    <!-- Cuerpo -->
    <div class="cuerpo">
        <h1 class="titulo">Últimas Noticias:</h1>
        <div class="noticias" id="noticias"></div>
    </div>

    <!-- Footer -->
    <div id="footer"></div>

    <!-- Scripts -->
    <script>
        // Obtener el header desde GitHub
        fetch('https://raw.githubusercontent.com/yamarka/yamarka.github.io/master/header.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('header').innerHTML = data;
            });

        // Obtener las últimas noticias desde el archivo JSON
        fetch('https://raw.githubusercontent.com/yamarka/yamarka.github.io/master/todaslasnoticias/todaslasnoticias.json')
            .then(response => response.json())
            .then(data => {
                // Filtrar las últimas 3 noticias y evitar duplicados
                const ultimasNoticias = data.reverse().reduce((acc, noticia) => {
                    if (!acc.some(item => item.titulo === noticia.titulo)) {
                        acc.push(noticia);
                    }
                    return acc.length < 3 ? acc : acc.slice(0, 3);
                }, []);

                // Mostrar las noticias en el cuerpo
                const noticiasContainer = document.getElementById('noticias');
                ultimasNoticias.forEach(noticia => {
                    const noticiaHTML = `
                        <div class="noticia">
                            <img class="imagen" src="${noticia.imagen}" alt="${noticia.titulo}">
                            <h2>${noticia.titulo}</h2>
                            <p class="contenido">${truncateText(noticia.contenido, 50)}</p>
                            <a class="leer-mas" href="${noticia.enlace_noticia}" target="_blank">Leer más</a>
                        </div>
                    `;
                    noticiasContainer.innerHTML += noticiaHTML;
                });
            });

        // Obtener el footer desde GitHub
        fetch('https://raw.githubusercontent.com/yamarka/yamarka.github.io/master/footer.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('footer').innerHTML = data;
            });

        // Función para truncar el texto
        function truncateText(text, limit) {
            const words = text.split(' ');
            if (words.length > limit) {
                return words.slice(0, limit).join(' ') + '...';
            }
            return text;
        }
    </script>
</body>
</html>
